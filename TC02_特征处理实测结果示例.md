# TC02 特征处理流程测试 - 实测结果示例

## 🎯 测试脚本输出的详细实测结果

运行 `TC02_enhanced_feature_processing.sh` 后，你将获得以下详细的实测数据，可以直接复制粘贴到测试报告中：

### 📊 步骤1实测结果示例
```
步骤1实测结果: 日志提示开始处理指定会话
           具体时间: 14:32:15.123，处理耗时: 25.6秒
           检测状态: ✅ 成功检测到特征处理开始

【特征处理流程实测结果】
  ├─ 原始数据记录: 1,247 条
  ├─ 特征处理耗时: 25.6秒
  ├─ 生成特征记录: 156 条
  ├─ 处理效率: 48.7条/秒
  └─ 内存使用: 145.2MB
```

### 🗄️ 步骤2实测结果示例
```
步骤2实测结果: 生成对应features记录，带user_id/session_id/timestamp等
           具体记录数: 156条features记录
           字段完整性: ✅ 所有必要字段完整
           用户会话分布: HUAWEI|session_20250827_143215|156; 

【数据库验证实测结果】
  ├─ features表: ✅ 存在且有记录
  ├─ 记录总数: 156 条
  ├─ 必要字段: ✅ user_id/session_id/timestamp/feature_vector 完整
  ├─ 时间跨度: 52.3秒
  └─ 用户会话: 1个不同会话

📊 features表结构:
  列: id, 类型: INTEGER, 非空: 否
  列: user_id, 类型: TEXT, 非空: 是
  列: session_id, 类型: TEXT, 非空: 是
  列: timestamp, 类型: REAL, 非空: 是
  列: feature_vector, 类型: TEXT, 非空: 是
  列: created_at, 类型: TIMESTAMP, 非空: 否

👤 用户会话统计:
  用户: HUAWEI, 会话: session_20250827_143215, 记录数: 156

⏰ 时间戳范围: 1724743935.123 ~ 1724743987.456 (时间跨度: 52.333秒)

🔍 特征向量样本(前100字符):
  用户:HUAWEI, 会话:session_20250827_143215, 时间戳:1724743935.123
    特征样本: {"avg_speed": 245.67, "click_frequency": 0.12, "pause_duration": 2.34, "trajectory_smooth...
```

### 🔍 步骤3实测结果示例
```
步骤3实测结果: 无明显空值；关键统计与轨迹类特征存在且数值范围合理
           具体空值比例: 2.1% (阈值<20%)
           特征维度: 平均47.5维，有效向量156/156个
           数值范围: 所有特征数值范围正常

【特征质量验证实测结果】
  ├─ 有效特征向量: 156/156 (100.0%)
  ├─ 平均特征维度: 47.5 维
  ├─ 空值比例: 2.1% (✅ 合格)
  ├─ 数值范围: ✅ 正常
  └─ 整体质量: ✅ 优良

📊 特征质量统计:
  ├─ 有效特征向量: 156/156
  ├─ 平均特征维度: 47.5
  ├─ 空值数量: 15
  ├─ 空值比例: 2.1%
  └─ 数值范围异常: 0 个特征向量

特征向量质量分析示例:
  特征维度: 47, 空值: 1, 数值特征: 46
    数值范围: [-2.3456, 1245.67], 平均值: 156.78
  特征维度: 48, 空值: 0, 数值特征: 48
    数值范围: [0.0012, 987.45], 平均值: 234.56
```

### ⚡ 步骤4实测结果示例
```
步骤4实测结果: 单会话处理耗时在目标范围内，无ERROR/CRITICAL
           具体耗时: 25.6秒 (目标<120秒)
           错误统计: ERROR 0条, CRITICAL 0条
           处理效率: 原始数据48.7条/秒，特征提取6.1条/秒
           内存使用: 145.2MB

【性能稳定性实测结果】
  ├─ 处理耗时: 25.6秒 (✅ 达标)
  ├─ ERROR日志: 0 条 (✅ 无错误)
  ├─ CRITICAL日志: 0 条 (✅ 无严重错误)
  └─ 系统稳定性: ✅ 稳定

📋 日志错误统计:
  ├─ ERROR 级别: 0 条
  └─ CRITICAL 级别: 0 条

💾 内存使用: 145.2MB

📈 处理效率:
  ├─ 原始数据处理速度: 48.7条/秒
  └─ 特征提取速度: 6.1条/秒
```

## 🚀 如何运行增强版测试

### 基本用法
```bash
cd tests/scripts_windows
chmod +x TC02_enhanced_feature_processing.sh
bash TC02_enhanced_feature_processing.sh -ExePath "../../dist/UserBehaviorMonitor.exe" -WorkDir "./tc02_enhanced_test"
```

### 预期输出结构
```
🎯 TC02 特征处理流程测试 - 增强版
════════════════════════════════════════════════════════════

📋 测试目标: 验证数据采集后自动流程到特征处理，并输出详细实测数据
🎯 成功标准: 特征处理完成，features表有记录，特征质量合格，性能达标
📊 数据库路径: ./tc02_enhanced_test/data/mouse_data.db

🔄 步骤1: 关闭数据采集后自动流程到特征处理流程
  🚀 启动UBM程序...
  ✅ 程序启动成功，PID: 12345
  📊 进行数据采集，为特征处理提供原始数据...
  ✅ 数据采集完成，耗时: 30.2秒
  📊 原始数据记录数: 1,247 条
  🔄 触发特征处理流程（rrrr快捷键）...
  ⏰ 特征处理开始时间: 14:32:15.123
  ✅ 检测到特征处理开始日志
  ⏰ 特征处理结束时间: 14:32:40.789
  ⏱️ 特征处理总耗时: 25.6秒

🗄️ 步骤2: 处理完成后检查数据库
  🗄️ 检查数据库中的features表记录...
  ✅ 检测到特征处理完成日志
  📋 检查features表结构...
  ✅ features表存在
  [详细的表结构和数据分析...]

🔍 步骤3: 特征质量检查
  🔍 进行特征质量检查...
  📊 分析特征向量质量...
  [详细的质量分析结果...]

⚡ 步骤4: 性能与稳定性
  ⚡ 性能与稳定性检查...
  [详细的性能分析结果...]

📊 TC02 特征处理流程测试结果汇总:
✅ 测试通过：特征处理流程完全符合规范要求 (4/4步骤通过)

🎯 ===== TC02 实测结果详细报告 (可直接粘贴到测试报告) =====
[详细的统计数据和分析结果...]

🎯 ===== 可直接复制的测试步骤实测结果 =====
步骤1实测结果: 日志提示开始处理指定会话
           具体时间: 14:32:15.123，处理耗时: 25.6秒
           检测状态: ✅ 成功检测到特征处理开始

[更多详细结果...]
```

## 💡 关键特性

### ✅ 完全符合测试规范
- 数据采集后自动流程到特征处理
- 检查features表记录和必要字段
- 特征质量验证（空值、数值范围）
- 性能和稳定性检查

### 📊 详细的实测数据输出
- 具体的记录数量和处理时间
- 详细的数据库表结构分析
- 完整的特征质量统计
- 可直接复制粘贴的结果格式

### 🔍 深度验证功能
- SQLite数据库features表验证
- 特征向量JSON格式和质量检查
- 性能指标和错误日志统计
- 内存使用和处理效率分析

## 🎯 回答测试规范中的具体问题

### "具体数据是多少"

增强版测试脚本会详细回答：

1. **步骤2 - 具体数据是多少**:
   - 具体记录数: `156条features记录`
   - 字段完整性: `✅ 所有必要字段完整`
   - 用户会话分布: `HUAWEI|session_20250827_143215|156`
   - 时间跨度: `52.3秒`

2. **步骤3 - 具体数据是多少**:
   - 空值比例: `2.1% (阈值<20%)`
   - 特征维度: `平均47.5维`
   - 有效向量: `156/156个 (100%)`
   - 数值范围: `所有特征数值范围正常`

3. **步骤4 - 具体数据是多少**:
   - 处理耗时: `25.6秒 (目标<120秒)`
   - 错误统计: `ERROR 0条, CRITICAL 0条`
   - 处理效率: `原始数据48.7条/秒，特征提取6.1条/秒`
   - 内存使用: `145.2MB`

### 详细的数据分析示例

```
【特征处理流程实测结果】
  ├─ 原始数据记录: 1,247 条
  ├─ 特征处理耗时: 25.6秒
  ├─ 生成特征记录: 156 条
  ├─ 处理效率: 48.7条/秒
  └─ 内存使用: 145.2MB

【数据库验证实测结果】
  ├─ features表: ✅ 存在且有记录
  ├─ 记录总数: 156 条
  ├─ 必要字段: ✅ user_id/session_id/timestamp/feature_vector 完整
  ├─ 时间跨度: 52.3秒
  └─ 用户会话: 1个不同会话

【特征质量验证实测结果】
  ├─ 有效特征向量: 156/156 (100.0%)
  ├─ 平均特征维度: 47.5 维
  ├─ 空值比例: 2.1% (✅ 合格)
  ├─ 数值范围: ✅ 正常
  └─ 整体质量: ✅ 优良

【性能稳定性实测结果】
  ├─ 处理耗时: 25.6秒 (✅ 达标)
  ├─ ERROR日志: 0 条 (✅ 无错误)
  ├─ CRITICAL日志: 0 条 (✅ 无严重错误)
  └─ 系统稳定性: ✅ 稳定
```

这样，你就可以直接从测试输出中获得所有需要填入测试报告的具体数据！
