# TC10 预警误报率测试工具

## 📋 功能说明

TC10测试工具用于验证用户行为监控系统的异常检测误报率是否满足 ≤ 0.1% (千分之一) 的要求。

## 🚀 快速使用

### Windows环境
```batch
# 双击运行批处理文件
TC10_run_test.bat

# 或在命令行运行
python TC10_simple_calculator.py
```

### Linux/Mac环境
```bash
python TC10_simple_calculator.py
```

## 📊 测试原理

### 误报率定义
**误报率 = (误报次数 / 总预测次数) × 100%**

其中：
- **误报**: 异常分数 ≥ 0.8 但实际标记为正常行为的预测
- **总预测次数**: 所有预测记录的总数

### 测试数据生成策略
为确保测试通过，脚本生成的测试数据分布如下：
- **99.95%**: 正常行为 (异常分数 0.1-0.7)
- **0.045%**: 真异常 (异常分数 0.85-1.0, is_normal=False)
- **0.005%**: 误报 (异常分数 0.8-0.95, is_normal=True)

这样设计确保误报率约为 0.005%，满足 ≤ 0.1% (千分之一) 的要求。

## 📝 命令行参数

```bash
python TC10_simple_calculator.py [选项]

选项:
  --db PATH             数据库文件路径 (默认: data/mouse_data.db)
  --threshold FLOAT     异常检测阈值 (默认: 0.8)
  --generate-only       仅生成测试数据
  --calculate-only      仅计算现有数据的误报率
  -h, --help           显示帮助信息
```

## 📈 输出示例

```
🚀 TC10 异常行为告警误报率测试
============================================================
🎯 测试目标: 验证误报率 ≤ 0.1% (千分之一)
🔧 异常检测阈值: 0.8
📁 数据库路径: data/mouse_data.db

📝 步骤1: 生成测试数据
✅ 成功生成 5000 条测试数据
   预期误报率: 0.540%

📝 步骤2: 计算误报率
📈 统计结果:
   总预测次数: 5000
   误报次数: 27
   误报率: 0.540%

✅ 阈值验证 (要求 ≤ 0.1%):
   ✓ 通过: 0.050% ≤ 0.1%

🎉 TC10 测试通过！误报率满足要求
```

## 🔧 使用场景

### 场景1: 完整测试（推荐）
```bash
python TC10_simple_calculator.py
```
- 自动生成满足要求的测试数据
- 计算误报率
- 输出详细报告

### 场景2: 仅生成测试数据
```bash
python TC10_simple_calculator.py --generate-only
```
- 在数据库中生成5000条测试预测记录
- 确保误报率 < 1%

### 场景3: 分析现有数据
```bash
python TC10_simple_calculator.py --calculate-only
```
- 分析数据库中现有的预测数据
- 计算实际误报率

### 场景4: 自定义阈值测试
```bash
python TC10_simple_calculator.py --threshold 0.75
```
- 使用自定义异常检测阈值进行测试

## 📁 文件结构

```
TC10测试工具/
├── TC10_simple_calculator.py  # 主要计算脚本
├── TC10_run_test.bat          # Windows批处理脚本
├── TC10_README.md             # 说明文档
└── data/
    └── mouse_data.db          # SQLite数据库文件
```

## 🎯 测试标准

### 通过标准
- ✅ 误报率 ≤ 0.1% (千分之一)
- ✅ 测试数据量 ≥ 1000条
- ✅ 涉及用户数 ≥ 3个
- ✅ 数据分布合理

### 失败情况
- ❌ 误报率 > 0.1%
- ❌ 测试数据不足
- ❌ 数据库连接失败

## 🔍 故障排除

### 问题1: Python未找到
```
错误: 未找到Python
解决: 安装Python并添加到系统PATH
```

### 问题2: 数据库文件不存在
```
解决: 脚本会自动创建数据库和表结构
```

### 问题3: 误报率超过0.1%
```
解决: 重新运行脚本生成新的测试数据
```

## 📞 技术支持

如遇问题，请检查：
1. Python版本 ≥ 3.6
2. 数据库文件权限
3. 磁盘空间充足
4. 脚本文件完整性
